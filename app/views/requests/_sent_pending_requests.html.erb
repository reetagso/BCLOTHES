<div class="h5 my-4">
  <% if @requests_sent_pending == nil %>
    You have no pending Bclothes requests
  <% else %>
    You have <%=@requests_sent_pending.length%> pending Bclothes requests
</div>
  <div class="rounded-3">
    <% @requests_sent_pending.each do |request| %>
      <div class="d-flex align-items-center my-4 pl-3 h5">
        <h4 class="pr-2">Request sent to <%= User.find(Item.find(request.item_id).user_id)[:first_name]%></h4>
        <%= image_tag User.find(request.user_id).photo.key ? User.find(request.user_id).photo.url : "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
      </div>
      <div class="d-flex shadow rounded">
        <div class="shadow m-3">
          <%= cl_image_tag Item.find(request.item_id).photos.first.key, height: 300, width: 300, crop: :pad, background: "auto" %>
        </div>
        <div class="ms-4 my-3">
          <h5><%= request.title%></h5>
          <p><em><%= request.start_date.strftime("%b %d, %Y")%>-<%= request.end_date.strftime("%b %d, %Y")%></p></em>
          <p><%= request.description%><p>
          <div>
            <div>
              <%= link_to "View Item", item_path(Item.find(request.item_id)), class: ""  %>
            </div>
            <div>
              <%= link_to "View Request", request_path(request), class: "" %>
            </div>
            <div>
              <%= link_to "Edit Request", edit_request_path(request), class: "" %>
            </div>
            <div>
              <%= link_to "Cancel Request", request_path(request), data: {turbo_method: :delete}, class: ""  %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
